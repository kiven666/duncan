<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>酷炫瀑布流</title>
</head>
<!-- test -->
    <style type="text/css">
        
        *{
            margin:0;
            padding:0;
        }
        html,body{
            width: 100%;
            height:100%;
            font-size:14px;
        }
        img{
            border:0;
            display:block;
        }
        div.main{
            width:100%;
            margin:0 auto;
            background:#ddd;
            position:relative;
            /*overflow:hidden;*/
        }
        div.main div{
            width:220px;
            padding:4px;
            border:1px solid #000;
            float:left;
            position:absolute;
        }

        div.main div h3{
            line-height:35px;
            color:#96c;
        }

        div.main div img{
            width:220px;
        }

        div.main div p{
            text-indent:12px;
            color:green;
             margin-top:10px;
        }
        div.main div span{
            display:inline-block;
            text-indent:12px;
            color:#aa7d52;
            margin-top:10px;
        }

    </style>


    <script type="text/javascript">
        
    window.onload = function(){
        waterFull("box");
    }

    window.onresize = function(){
        waterFull("box");
    }

    function waterFull(element,space,children){

        if(!element){   
            return;
        }
        space = space || 10;    //div上下的间隔
        children = children || "div";  //前三行默认设置

        var wrap = document.getElementById(element);
        var water = wrap.getElementsByTagName(children);

        var oneWidth = water[0].offsetWidth;    //第一个子元素的宽度 210px  offsetWidth(padding+border)
        
        var wrapWidth = wrap.offsetWidth;   //外框总宽度

        var eleLen = Math.floor(wrapWidth / oneWidth);  //得到一行能显示的  列数

        var padding = Math.floor((wrapWidth - oneWidth * eleLen) / (eleLen + 1));   //计算一行的留白 及每行间隔
        console.log(padding)

        var arr = new Array();   //定义一个空数组  用来装每一个div的 left 和top 值

        var maxHeight = 0;  //最大高度 0？？？

        for(var i=0;i<eleLen;i++){  //初始化数组来计算各列初始top值和left值
            arr[i] = new Object();
            arr[i].top = space;  //初始top值
            arr[i].left = (oneWidth * i) + padding *(i + 1);     //每一个的 left(距左的距离)值
        }

        for(var i=0;i<water.length;i++){       //遍历所有的子元素 及瀑布流布局

            //计算当前元素在第几列
            if((i + 1) % eleLen == 0){
                sub = eleLen;   //最后一列
            }else{
                sub = (i + 1) % eleLen;
            }

            _this = water;
            _this[i].style.position = "absolute";
            _this[i].style.left = arr[sub - 1].left + "px";     //计算各列最新高度以便赋值

            _this[i].style.top = arr[sub - 1].top + "px";
            arr[sub - 1].top += _this[i].offsetHeight + space;   
        }

        /*for(var i=0;i<eleLen;i++){
            if(arr[i].top > maxHeight) maxHeight = arr[i].top;
        } 
        wrap.style.height = maxHeight + "px";*/
    }


    </script>


<body>

    <div id="box" class="main">
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/1.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/2.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/3.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/4.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/5.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/6.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/7.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/8.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/9.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/10.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/11.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/12.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/13.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/14.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/15.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/16.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/17.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/18.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/19.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/20.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/21.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/22.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/23.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/24.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
        <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/25.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div>
       <!--  <div>
            <h3>瀑布流</h3>
            <a href="javascript:void(0);"><img src="images/26.jpg" alt=""></a>
            <p>二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。二十一世纪以来最美的女人，速来围观。</p>
            <span>tmd竟然是凤姐！吐吐吐。。。</span>
        </div> -->
    </div>
    
</body>
</html>